<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Rec Dungeons</title>
  <link rel="icon" type="image/png" href="redrec32.png">
<script>
  (function() {
    if (window.innerWidth <= 768) {
      window.location.href = "mobile/index.html";
    }
  })();
</script>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    :root {
      --bg: black;
      --fg: red;
      --text: red;
    }
    body.light, html.light {
      --bg: white;
      --fg: black;
      --text: black;
      background: var(--bg);
      color: var(--text);
      
    }
    html, body {
      margin: 0;
      padding: 0;
      background: var(--bg);
      color: var(--text);
      font-family: 'Courier New', monospace;
      height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      animation: fadeInPage 2s ease;
      transition: background 0.5s, color 0.5s;
      
    }
    .container {
      text-align: center;
      z-index: 1;
      animation: glitchIntro 0.5s ease-in;
    }
    @keyframes glitchIntro {
		  0%   { opacity: 0; transform: translate(0, 0); }
		  20%  { transform: translate(2px, -2px); }
		  40%  { transform: translate(-2px, 2px); }
		  60%  { transform: translate(1px, -1px); }
		  80%  { transform: translate(-1px, 1px); }
		  100% { opacity: 1; transform: translate(0, 0); }
		}
		
		img.logo {
		  width: 100px;
		  height: auto;
		  margin-bottom: 5rem;
		  transition: filter 0.8s ease-out, transform 0.8s ease;
		}
		
		img.logo:hover {
		  filter: drop-shadow(0 0 60px red) brightness(4);
		  transition: filter 0.05s ease-in, transform 0.4s ease;
		}

    h1 {
      font-size: 2rem;
      margin-bottom: 1.5rem;
      letter-spacing: 1px;
    }
.link-list {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(140px, 180px));
  justify-content: center;
  gap: 0.6rem;
  max-width: 800px;
  width: 100%;
}
		.link-button {
		  text-align: center;
		}
				/* 取代原本 flex 控制： */
		.link-list a {
		  min-width: 120px;
		  text-align: center;
		}
    .link-button {
      color: var(--fg);
      background: transparent;
      padding: 0.2rem 1rem;
      margin: 1rem;
      /* border: 1px solid var(--fg);*/s
      font-size: 1rem;
      cursor: pointer;
      text-decoration: none;
      display: inline-block;
    }
/* 黑色背景時，hover 文字變白 */
body.light .link-button:hover {
  color: red;  /* White */
}

/* 白色背景時，hover 文字變紅 */
body:not(.light) .link-button:hover {
  color: white;  /* Red */
}

.link-button:hover::before {
  content: '✒'; /* 顯示箭頭 */
  left: -20px; /* 調整箭頭位置 */
  opacity: 1; /* 顯示箭頭 */
}
		.link-button:active {
		  filter: brightness(1.8);
		}
		
		.link-button:focus {
		  outline: 1px dashed var(--fg);
		  outline-offset: 0px;
		}
		
		
		
		.module-ring {
		  position: absolute;
		  top: -36%;
		  left: 50%;
		  width: 230px;
		  height: 230px;
		  animation: rotate 30s linear infinite;
		  transform-origin: center center;
		  z-index: 0;
		  pointer-events: none;
		}

    .module-ring span {
      position: absolute;
      font-size: 1.2rem;
    }
    .module-ring span:nth-child(1) { top: 0%; left: 50%; transform: translateX(-50%); }
    .module-ring span:nth-child(2) { top: 18%; left: 82%; transform: translate(-50%, -50%); }
    .module-ring span:nth-child(3) { top: 50%; left: 100%; transform: translate(-50%, -50%); }
    .module-ring span:nth-child(4) { top: 82%; left: 82%; transform: translate(-50%, -50%); }
    .module-ring span:nth-child(5) { top: 100%; left: 50%; transform: translate(-50%, -100%); }
    .module-ring span:nth-child(6) { top: 82%; left: 18%; transform: translate(-50%, -50%); }
    .module-ring span:nth-child(7) { top: 50%; left: 0%; transform: translate(-50%, -50%); }
    .module-ring span:nth-child(8) { top: 18%; left: 18%; transform: translate(-50%, -50%); }
    @keyframes rotate {
      from { transform: translateX(-50%) rotate(0deg); }
      to { transform: translateX(-50%) rotate(360deg); }
    }
    .top-buttons {
      position: absolute;
      top: 1rem;
      right: 1rem;
      display: flex;
      gap: 0.8rem;
    }
    .top-buttons button {
      background: transparent;
      border: 1px solid var(--fg);
      color: var(--fg);
      padding: 0.3rem 0.6rem;
      font-size: 0.8rem;
      cursor: pointer;
    }
    .top-buttons button:hover {
      background: var(--fg);
      color: var(--bg);
    }
    .message {
      font-size: 0.8rem;
      margin-top: 1rem;
      opacity: 0.8;
    }
    
    .invite-box {
		  margin-top: 2rem;
		  display: flex;
		  flex-direction: column;
		  align-items: center;
		  gap: 0.5rem;
		}
		
		.invite-code {
		  font-size: 0.9rem;
		  border: 1px dashed var(--fg);
		  padding: 0.1rem 0.3rem;
		  word-break: break-all;
		  max-width: 90vw;
		}
		
		
		.invite-actions {
		  display: flex;
		  gap: 0.2rem;
		}
		.invite-actions button {
		  background: transparent;
		  border: 1px solid var(--fg);
		  color: var(--fg);
		  padding: 0.1rem 0.3rem;
		  font-size: 0.8rem;
		  cursor: pointer;
		}
		.invite-actions button:hover {
		  background: var(--fg);
		  color: #39ff00;
		}

//強制邀請按鈕樣式對齊
button.link-button {
  font-family: 'Courier New', monospace;
  font-size: 1rem;
  letter-spacing: 0.5px;
  line-height: 1.2;
  padding: 0.9rem 1.5rem;
  border: 1px solid var(--fg);
  color: var(--fg);
  background: transparent;
  margin: 0.3rem;
  cursor: pointer;
}
button.link-button:hover {
  background: var(--fg);
  color: var(--bg);
  box-shadow: 0 0 3px var(--fg);
}


//郵件按鈕
.email-modal {
  position: fixed;
  top: 30%;
  left: 50%;
  transform: translate(-50%, -50%);
  background: var(--bg);
  color: var(--text);
  padding: 1.5rem;
  z-index: 9999;
  font-family: 'Courier New', monospace;
  min-width: 280px;
  max-width: 90vw;
  box-shadow: 0 0 15px var(--fg);
}

.email-modal {
  position: fixed !important;
  top: 50% !important;
  left: 50% !important;
  transform: translate(-50%, -50%) !important;
  z-index: 9999 !important;
  backdrop-filter: blur(2px);
}
.email-modal-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-weight: bold;
  margin-bottom: 1rem;
  font-size: 1rem;
}

.email-modal-close {
  cursor: pointer;
  padding-left: 1rem;
  color: var(--fg);
}

.email-list {
  display: flex;
  flex-direction: column;
  gap: 0.4rem;
}

.email-list code {
  background: transparent;
  padding: 0.3rem 0.8rem;
  font-size: 0.9rem;
  color: var(--text);
}

.email-list a {
  text-decoration: none;
  outline: none;
}
.email-list a code {
  display: inline-block;
  padding: 0.3rem 0.8rem;
  font-size: 0.9rem;
  font-family: 'Courier New', monospace;
  color: var(--text);
  background: transparent;
  transition: background;
}
.email-list a code:hover {
  color: #00ff1e;
  cursor: pointer;
}
.email-list a:focus code,
.email-list a code:focus {
  outline: 1px dashed var(--fg);
  outline-offset: 0px;
}




    @media (max-width: 768px) {
		  .link-list {
		    grid-template-columns: 1fr;
		  }
		}
		#introCover {
		  position: fixed;
		  top: 0;
		  left: 0;
		  width: 100vw;
		  height: 100vh;
		  background: red;
		  z-index: 9999;
		  animation: fadeOutCover 0.6s ease forwards;
		}
		
		@keyframes fadeOutCover {
		  0% { opacity: 1; }
		  90% { opacity: 0.1; }
		  100% { opacity: 0; visibility: hidden; }
		}

#particleCanvas {
  position: fixed; /* 確保它固定於背景 */
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  z-index: 9999; /* 確保它不會遮住其他內容 */
  pointer-events: none; /* ← 加這行 */
}


  </style>
</head>
<body>
	<div id="introCover"></div>
	<canvas id="particleCanvas"></canvas>
  <div class="top-buttons">
	<div class="top-buttons">
	  <button onclick="toggleTheme()">💡</button>
	  <button onclick="bookmarkSite()">📌</button>
	  <button onclick="goToMobile()">📱</button>
	</div>
  </div>
		<div class="container">
	  <div style="position: relative; display: inline-block;">
	    <img id="logo" src="redrec.png" alt="Ret/Mat logo" class="logo">
	    <div class="module-ring">
	      <span>⭒</span><span>✞</span><span>𖤠</span><span>⛏︎</span>
	      <span>𖤂</span><span>⚕︎</span><span>✑</span><span>✐</span><span>⭑</span>
	    </div>

	  </div>
		
    <div class="link-list">
          <a class="link-button" href="https://spiral.ooo" target="_blank">⛏︎</a>
          <a class="link-button" href="https://spirallab.org" target="_blank">/lab</a>
          <a class="link-button" href="https://sus.church" target="_blank">/church</a>
      <a class="link-button" href="https://x.com/recdungeons" target="_blank">.𝕏[軍田勇]</a>
      <a class="link-button" href="https://archiveofourown.org/users/recdnd" target="_blank">ao3</a>
      <a class="link-button" href="https://x.com/recdnd" target="_blank">.𝕏[MAIN]</a>
      <a href="javascript:void(0)" class="link-button" onclick="toggleEmailModal()">/mailbox</a>
      <a class="link-button" href="https://discord.gg/XsTmRs9RrG" target="_blank">/cord</a>
    </div>
		<a href="javascript:void(0)" class="link-button" onclick="toggleInvite()">../and_specials_for_you</a>
		
		
	<div class="link-zone">
		<div class="invite-box" id="inviteBox" style="display: none;">
		  <div class="invite-actions">
		      <a></a></br>
		    <button onclick="generateCode()">ECHO</button>
		    <button onclick="copyCode()">✂️</button>
		  </div>
		  <div id="inviteCode" class="invite-code">[░░░░::░░░░]</div>
		</div>

    <div class="message" id="bookmarkMsg"></div>
		</div>

  </div>
  
  <script>
    function bookmarkSite() {
      const msg = document.getElementById("bookmarkMsg");
      const url = window.location.href;
      const title = document.title;
      if (window.sidebar && window.sidebar.addPanel) {
        window.sidebar.addPanel(title, url, '');
      } else if (window.external && ('AddFavorite' in window.external)) {
        window.external.AddFavorite(url, title);
      } else {
        msg.textContent = "🔖press Ctrl+D (or Cmd+D) to bookmark this page☆";
        setTimeout(() => msg.textContent = '', 3000);
      }
    }
    
		function toggleEmailModal() {
		  const modal = document.getElementById("emailModal");
		  const body = document.body;
		  const isVisible = modal.style.display === "block";
		  modal.style.display = isVisible ? "none" : "block";
		  body.style.overflow = isVisible ? "auto" : "hidden"; // 只在 modal 開啟時隱藏滾動
		}
    function toggleInvite() {
		  const box = document.getElementById("inviteBox");
		  box.style.display = (box.style.display === "none") ? "flex" : "none";
		}
    //亂碼生成
function generateCode() {
  const seed = Date.now().toString(36) + navigator.userAgent.length;
  const base = btoa(seed).replace(/[^a-zA-Z0-9]/g, '').slice(0, 24);
  const finalCode = `[SPIRAL::INVITE]::${base}::𝓡`;

  const inviteElem = document.getElementById("inviteCode");

  let frame = 0;
  const totalFrames = 15;
  const charset = "█▒░<>:;!#&%?~ABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890";
  let animation = setInterval(() => {
    let display = '';
    for (let i = 0; i < finalCode.length; i++) {
      if (i < (frame / totalFrames) * finalCode.length) {
        display += finalCode[i];
      } else {
        display += charset[Math.floor(Math.random() * charset.length)];
      }
    }
    inviteElem.textContent = display;
    frame++;
    if (frame > totalFrames) {
      clearInterval(animation);
      inviteElem.textContent = finalCode;
    }
  }, 40);
}

		
		function copyCode() {
		  const text = document.getElementById("inviteCode").textContent;
		  navigator.clipboard.writeText(text).then(() => {
		    const msg = document.getElementById("bookmarkMsg");
		    msg.textContent = "✓Invitation code copied.";
		    setTimeout(() => msg.textContent = '', 3000);
		  });
		}

		function toggleTheme() {
		  document.body.classList.toggle("light");
		  document.documentElement.classList.toggle("light");
		  const logo = document.getElementById("logo");
		  const isLight = document.body.classList.contains("light");
		  logo.src = isLight ? "447blackmat.png" : "redrec.png";
		  
		  // 切換粒子顏色 螢光綠/紅
		  particleColor = isLight ? "rgba(31, 255, 0)" : "rgba(255, 0, 0, 1)";
		}

  </script>
  				<div class="email-modal" id="emailModal" style="display: none;">
				  <div class="email-modal-header">
				    mailinglist
				    <span class="email-modal-close" onclick="toggleEmailModal()">☒</span>
				  </div>

<div class="email-list">
  <a href="javascript:void(0)" onclick="copyEmailAndRedirect('rec@rec.ooo')"><code>rec@rec.ooo(primary)</code></a>
  <a href="javascript:void(0)" onclick="copyEmailAndRedirect('admin@spiral.ooo')"><code>admin@spiral.ooo</code></a>
  <a href="javascript:void(0)" onclick="copyEmailAndRedirect('recdnd@proton.me')"><code>recdnd@proton.me</code></a>
  <a href="javascript:void(0)" onclick="copyEmailAndRedirect('recdungeons@gmail.com')"><code>recdungeons@gmail.com</code></a>
</div>
				</div>

				<script>
				function copyEmailAndRedirect(email) {
  // 複製到剪貼板
  navigator.clipboard.writeText(email).then(() => {
    const msg = document.getElementById("bookmarkMsg");
    msg.textContent = `📋 ${email} copied to clipboard!`;
    setTimeout(() => msg.textContent = '', 3000);
  });

  // 重定向到 mailto
  window.location.href = `mailto:${email}`;
}
</script>
<script>
const canvas = document.getElementById("particleCanvas");
const ctx = canvas.getContext("2d");
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

const particles = [];
let particleColor = "rgba(255, 0, 0, 1)";


function Particle(x, y) {
  this.x = x;
  this.y = y;
  this.size = 1;  // 大小
  this.speedX = Math.random() * 2 - 1;  // 隨機水平方向速度
  this.speedY = Math.random() * 2 - 1;  // 隨機垂直方向速度
}

Particle.prototype.update = function() {
  this.x += this.speedX;
  this.y += this.speedY;
  this.size *= 0.98; // 減緩消失速度，使其持續更久
  this.life -= 1;  // 顯示粒子剩餘生命時間
  ctx.globalAlpha = 1.0;
	ctx.strokeStyle = particleColor;
	ctx.fillStyle = particleColor;
	ctx.shadowColor = particleColor;
	ctx.beginPath();
	ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
	ctx.fill();
	ctx.stroke();
  ctx.strokeStyle = particleColor;
  ctx.lineWidth = 0.5;
  ctx.beginPath();
  ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
  ctx.fill();
  ctx.stroke();
};

function createParticles(e) {
  const xPos = e.x;
  const yPos = e.y;
  for (let i = 0; i < 5; i++) {
    particles.push(new Particle(xPos, yPos));
  }
}

function animateParticles() {
  ctx.clearRect(0, 0, canvas.width, canvas.height); // 清空畫布
  for (let i = 0; i < particles.length; i++) {
    particles[i].update();
    if (particles[i].size <= 0.2) {
      particles.splice(i, 1); // 移除小的粒子
    }
  }
}

document.addEventListener("mousemove", createParticles);
setInterval(animateParticles, 20); // 每20ms更新一次粒子
</script>

<script>
  function goToMobile() {
    window.location.href = "mobile/index.html";
  }
</script>

<script>
  document.addEventListener("DOMContentLoaded", function() {
    if (window.innerWidth <= 768 || /iPhone|iPad|iPod|Android/i.test(navigator.userAgent)) {
      window.location.href = "mobile/index.html";
    }
  });
</script>

</body>
</html>
